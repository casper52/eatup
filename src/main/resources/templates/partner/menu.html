<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layout_partner}">

<div layout:fragment="content">

	<style>
#content-wrapper {
/* 	background-image: url("/agency/img/header-bg.jpg"); */
}

.col-centered {
	float: none;
	margin: 0 auto;
}
</style>

	<!-- <h1 th:text="${partner.sno}"></h1> -->
	<ol class="breadcrumb">
		<li class="breadcrumb-item">메뉴<a
			href="/partner/menu?sno=${menu.sno}"></a></li>
		<li th:text="${menu[0].sname}" class="breadcrumb-item active"></li>
	</ol>

	<div class="row">

		<!-- 메뉴목록 -->

		<div th:each="menu : ${menu}" class="col-xl-3 col-sm-6 mb-3"
			id="menubox">
			<div class="card o-hidden h-100">
				<div class="card-body">
				
					<img th:src="@{${'/upload/display?fileName='+ menu.upload_path +'\'+menu.uuid+'_'+menu.fname}}">
					<div th:text="${menu.fname}" align="center"></div>
					<div th:text="${menu.mname}" align="center"></div>
					<div th:text="${menu.mprice}" align="center"></div>
					<div th:text="${menu.introduction}" align="center"></div>
					</br>

					<div class="row">
						<div class="col-xl-3 col-sm-6 mb-3 col-centered">
							<div class="input-group">
								주문량 <input class="form-control" aria-label="Default"
									aria-describedby="inputGroup-sizing-default" type="number"
									id="usernumber" name="usernumber" value="5" step="1" min="0"
									max="1000"> <span class="input-group-btn">
									<button type="button" class="btn btn-dark">설정</button>
								</span>
							</div>
						</div>
					</div>
				</div>
				<button id="soldout" type="button" class="btn btn-danger">품절</button>
			</div>
		</div>
		
		<div class=uploadResult><ul></ul></div>
		


	</div>
</div>


<th:block layout:fragment="script">
	<script th:inline="javascript">
		$(document).ready(function() {
			

			//첨부파일 보여주기
			(function(){
				
				var sno = [[${menu[0].sno}]];
				
				$.getJSON("/partner/readMenuImg",{sno:sno},function(arr){
					console.log(arr);
					
					var str = "";
					
					$(arr).each(function(i,upload){
						
						var fileCallPath = encodeURIComponent(upload.upload_path+"/s_"+upload.uuid+"_"+upload.fname);
						
						console.log(""+upload.upload_path);
						
						str += "<li data-path='"+upload.upload_path+"' data-uuid='"+upload.uuid+"' data-filename='"+upload.fname+"'>";
						str += "<div>";
						str += "<span>" + upload.fname + "</span><br/>";
						str += "<img src='/upload/display?fileName="+fileCallPath+"'>";
						str += "</div>";
						str += "</li>";
						

					});
					
					$(".uploadResult ul").append(str);
					
					
				});// end getjson
				
			})();//end function

		});
	</script>
</th:block>